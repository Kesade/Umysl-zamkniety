@using System.Text.RegularExpressions

@model string

@{

    var limit = Model.Length > 250 ? 250 : Model.Length;

    if (Regex.IsMatch(Model.Substring(0, limit).ToLower(), @"<pre"))
    {
        while (!Regex.IsMatch(Model.Substring(0, limit).ToLower(), @"</pre>"))
        {
            limit++;
        }
    }

    <i>@Html.Raw(Model.Substring(0, limit)) [...]</i>
}
